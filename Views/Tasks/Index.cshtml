@model IEnumerable<TodoTask>

<h2>My Tasks</h2>

<a asp-action="Create" class="btn btn-primary">Add Task</a>

<table class="table mt-3">
    <tr>
        <th>Done</th>
        <th>Title</th>
        <th>Priority</th>
        <th>Pin</th>
        <th>Actions</th>
    </tr>

    @foreach (var item in Model)
    {
        <tr style="background-color:@(item.Priority == PriorityLevel.High ? "#f8d7da" :
                                              item.Priority == PriorityLevel.Medium ? "#fff3cd" : "#d4edda")">
        <td>
            <form asp-action="ToggleComplete" method="post">
                <input type="hidden" name="id" value="@item.Id" />
                <input type="checkbox" onchange="this.form.submit()" @(item.IsCompleted ? "checked" : "") />
            </form>
        </td>
        <td style="@(item.IsCompleted ? "text-decoration:line-through" : "")">
            @item.Title
        </td>
        <td>@item.Priority</td>
        <td>
            <form asp-action="TogglePin" method="post">
                <input type="hidden" name="id" value="@item.Id" />
                <button class="btn btn-sm btn-warning">📌</button>
            </form>
        </td>
        <td>
            <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger btn-sm">Delete</a>
        </td>
    </tr>
        }
</table>
